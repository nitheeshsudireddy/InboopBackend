spring.application.name=inboop-backend

# Server Configuration
server.port=8080

# CORS Configuration
app.cors.allowed-origins=${ALLOWED_ORIGINS:https://inboop.com,https://app.inboop.com,http://localhost:3000,http://localhost:3001}

# Google OAuth2
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=email,profile
spring.security.oauth2.client.registration.google.redirect-uri=${BACKEND_URL:http://localhost:8080}/login/oauth2/code/google

# Facebook/Instagram OAuth2 Configuration (Spring Security OAuth2 Client)
# Used for connecting Instagram Business accounts to Inboop
# NOTE: Credentials are required in production. For tests, see application-test.properties
#
# SCOPES EXPLAINED:
# - public_profile, email: Basic Facebook user info
# - pages_show_list: List Facebook Pages the user manages
# - pages_read_engagement: Read Page content and insights
# - instagram_basic: Read Instagram account info
# - instagram_manage_messages: Send/receive Instagram DMs (requires App Review)
#
# WHY NOT instagram_business_* SCOPES:
# - instagram_business_basic and instagram_business_manage_messages are for
#   "Instagram Business Login" product which has different requirements
# - We use standard "Facebook Login" + Instagram permissions instead
spring.security.oauth2.client.registration.facebook.client-id=${FACEBOOK_APP_ID:placeholder}
spring.security.oauth2.client.registration.facebook.client-secret=${FACEBOOK_APP_SECRET:placeholder}
spring.security.oauth2.client.registration.facebook.scope=public_profile,email,pages_show_list,pages_read_engagement,instagram_basic,instagram_manage_messages
spring.security.oauth2.client.registration.facebook.redirect-uri=${BACKEND_URL:http://localhost:8080}/login/oauth2/code/facebook
spring.security.oauth2.client.registration.facebook.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.facebook.client-name=Facebook

# Facebook OAuth2 Provider Configuration (Meta Graph API v21.0)
spring.security.oauth2.client.provider.facebook.authorization-uri=https://www.facebook.com/v21.0/dialog/oauth
spring.security.oauth2.client.provider.facebook.token-uri=https://graph.facebook.com/v21.0/oauth/access_token
spring.security.oauth2.client.provider.facebook.user-info-uri=https://graph.facebook.com/v21.0/me?fields=id,name,email
spring.security.oauth2.client.provider.facebook.user-name-attribute=id

# Frontend URL for OAuth success/failure redirects
app.frontend.url=${FRONTEND_URL:https://app.inboop.com}

# Database Configuration (H2 for development, PostgreSQL for production)
spring.datasource.url=${DB_URL:jdbc:h2:file:./data/inboop}
spring.datasource.driverClassName=${DB_DRIVER:org.h2.Driver}
spring.datasource.username=${DB_USER:sa}
spring.datasource.password=${DB_PASSWORD:password}

# JPA / Hibernate
spring.jpa.database-platform=${DB_PLATFORM:org.hibernate.dialect.H2Dialect}
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true

# Flyway Configuration (migrations run as separate container in production)
spring.flyway.enabled=${FLYWAY_ENABLED:false}
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
spring.flyway.locations=classpath:db/migration

# H2 Console (disable in production)
spring.h2.console.enabled=${H2_CONSOLE_ENABLED:true}
spring.h2.console.path=/h2-console

# Instagram API Configuration
instagram.api.base-url=https://graph.instagram.com
instagram.api.version=v21.0
instagram.webhook.verify-token=${INSTAGRAM_WEBHOOK_VERIFY_TOKEN:inboop_verify_token}

# Meta App Configuration (for signed_request verification)
# META APP REVIEW NOTE: The app secret is used to verify signed_request payloads
# from Meta's data deletion and deauthorization callbacks.
# Get this from: Meta for Developers > App Settings > Basic
meta.app.secret=${META_APP_SECRET:}

# Application Base URL (used for data deletion status URL)
app.base-url=${APP_BASE_URL:https://inboop.com}

# Frontend URL (used for OAuth redirects)
app.frontend.url=${FRONTEND_URL:https://app.inboop.com}

# Logging
logging.level.com.inboop.backend=${LOG_LEVEL:INFO}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:INFO}
logging.level.org.hibernate.SQL=${LOG_LEVEL_SQL:DEBUG}

# Actuator (for health checks)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when_authorized

# JWT Configuration
jwt.secret=${JWT_SECRET:inboop-default-secret-key-change-in-production-must-be-256-bits-long}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

